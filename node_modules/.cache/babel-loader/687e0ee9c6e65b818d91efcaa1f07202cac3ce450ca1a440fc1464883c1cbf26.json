{"ast":null,"code":"var _jsxFileName = \"C:\\\\CVDS\\\\loginProyect\\\\CVDS-4-FRONT\\\\src\\\\components\\\\TaskManager.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport CreateTask from \"./CreateTask\";\nimport TaskList from \"./TaskList\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst apiUrl = \"http://localhost:8080/tasks\"; // Adjust the URL if necessary\n\nfunction TaskManager({\n  token\n}) {\n  _s();\n  const [tasks, setTasks] = useState([]);\n\n  // Fetch tasks when the component mounts\n  useEffect(() => {\n    if (token && token.idUser) {\n      fetchTasks();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [token]);\n\n  // Function to fetch tasks by user\n  const fetchTasks = async () => {\n    if (!token || !token.idUser) return;\n    const response = await fetch(`${apiUrl}/GAT/${token.idUser}`);\n    const data = await response.json();\n    setTasks(data);\n  };\n\n  // Function to create a new task\n  const createTask = async newTask => {\n    if (!token || !token.idUser) return;\n    newTask.idUser = token.idUser; // Add idUser to the task\n    const response = await fetch(`${apiUrl}`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(newTask)\n    });\n    if (response.ok) fetchTasks();\n  };\n\n  // Function to update a task\n  const updateTask = async task => {\n    if (!token || !token.idUser) return;\n    await fetch(`${apiUrl}/${task.idTarea}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(task)\n    });\n    fetchTasks();\n  };\n\n  // Function to delete a task\n  const deleteTask = async id => {\n    if (!token || !token.idUser) return;\n    await fetch(`${apiUrl}/${id}`, {\n      method: \"DELETE\"\n    });\n    fetchTasks();\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"task-manager\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Administrador de Tareas\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), token && token.idUser ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(CreateTask, {\n        createTask: createTask,\n        idUser: token.idUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(TaskList, {\n        tasks: tasks,\n        updateTask: updateTask,\n        deleteTask: deleteTask\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Please log in to manage your tasks.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n_s(TaskManager, \"bBd6yqkqV9dlkj9ENgRyXKaiXpk=\");\n_c = TaskManager;\nexport default TaskManager;\nvar _c;\n$RefreshReg$(_c, \"TaskManager\");","map":{"version":3,"names":["React","useEffect","useState","CreateTask","TaskList","jsxDEV","_jsxDEV","Fragment","_Fragment","apiUrl","TaskManager","token","_s","tasks","setTasks","idUser","fetchTasks","response","fetch","data","json","createTask","newTask","method","headers","body","JSON","stringify","ok","updateTask","task","idTarea","deleteTask","id","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/CVDS/loginProyect/CVDS-4-FRONT/src/components/TaskManager.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport CreateTask from \"./CreateTask\";\r\nimport TaskList from \"./TaskList\";\r\n\r\nconst apiUrl = \"http://localhost:8080/tasks\"; // Adjust the URL if necessary\r\n\r\nfunction TaskManager({ token }) {\r\n  const [tasks, setTasks] = useState([]);\r\n\r\n  // Fetch tasks when the component mounts\r\n  useEffect(() => {\r\n    if (token && token.idUser) {\r\n      fetchTasks();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [token]);\r\n\r\n  // Function to fetch tasks by user\r\n  const fetchTasks = async () => {\r\n    if (!token || !token.idUser) return;\r\n    const response = await fetch(`${apiUrl}/GAT/${token.idUser}`);\r\n    const data = await response.json();\r\n    setTasks(data);\r\n  };\r\n\r\n  // Function to create a new task\r\n  const createTask = async (newTask) => {\r\n    if (!token || !token.idUser) return;\r\n    newTask.idUser = token.idUser; // Add idUser to the task\r\n    const response = await fetch(`${apiUrl}`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(newTask),\r\n    });\r\n    if (response.ok) fetchTasks();\r\n  };\r\n\r\n  // Function to update a task\r\n  const updateTask = async (task) => {\r\n    if (!token || !token.idUser) return;\r\n    await fetch(`${apiUrl}/${task.idTarea}`, {\r\n      method: \"PUT\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(task),\r\n    });\r\n    fetchTasks();\r\n  };\r\n\r\n  // Function to delete a task\r\n  const deleteTask = async (id) => {\r\n    if (!token || !token.idUser) return;\r\n    await fetch(`${apiUrl}/${id}`, { method: \"DELETE\" });\r\n    fetchTasks();\r\n  };\r\n\r\n  return (\r\n    <section className=\"task-manager\">\r\n      <h2>Administrador de Tareas</h2>\r\n      {token && token.idUser ? (\r\n        <>\r\n          <CreateTask createTask={createTask} idUser={token.idUser} />\r\n          <TaskList tasks={tasks} updateTask={updateTask} deleteTask={deleteTask} />\r\n        </>\r\n      ) : (\r\n        <p>Please log in to manage your tasks.</p>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default TaskManager;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}